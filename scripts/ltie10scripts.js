/*
 * jQuery-ajaxTransport-XDomainRequest - v1.0.4 - 2015-03-05
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2015 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(a){if(a.support.cors||!a.ajaxTransport||!window.XDomainRequest){return a}var c=/^(https?:)?\/\//i;var b=/^get|post$/i;var d=new RegExp("^(//|"+location.protocol+")","i");a.ajaxTransport("* text html xml json",function(f,g,e){if(!f.crossDomain||!f.async||!b.test(f.type)||!c.test(f.url)||!d.test(f.url)){return}var h=null;return{send:function(j,i){var k="";var l=(g.dataType||"").toLowerCase();h=new XDomainRequest();if(/^\d+$/.test(g.timeout)){h.timeout=g.timeout}h.ontimeout=function(){i(500,"timeout")};h.onload=function(){var m="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType;var r={code:200,message:"success"};var q={text:h.responseText};try{if(l==="html"||/text\/html/i.test(h.contentType)){q.html=h.responseText}else{if(l==="json"||(l!=="text"&&/\/json/i.test(h.contentType))){try{q.json=a.parseJSON(h.responseText)}catch(o){r.code=500;r.message="parseerror"}}else{if(l==="xml"||(l!=="text"&&/\/xml/i.test(h.contentType))){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=false;try{n.loadXML(h.responseText)}catch(o){n=undefined}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length){r.code=500;r.message="parseerror";throw"Invalid XML: "+h.responseText}q.xml=n}}}}catch(p){throw p}finally{i(r.code,r.message,q,m)}};h.onprogress=function(){};h.onerror=function(){i(500,"error",{text:h.responseText})};if(g.data){k=(a.type(g.data)==="string")?g.data:a.param(g.data)}h.open(f.type,f.url);h.send(k)},abort:function(){if(h){h.abort()}}}});return a}));
